package com.zgx.bootdemo.dao;

import com.zgx.bootdemo.entity.Bank;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Modifying;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

import java.util.List;

/**
 * @author zhouguixing
 * @date 2019/4/13 9:45
 * @description 银行dao层
 */

@Repository
public interface BankDaoBak extends JpaRepository<Bank, String> {
//public interface BankDao  {
//public interface BankDao   {

    @Query(value = "SELECT u FROM Bank u WHERE BANK_CODE=:id")
    Bank get(String id);

    @Query(value = "SELECT u FROM Bank u")
    List list();

    @Query(value = "insert into Bank value(?,?)", nativeQuery = true)
    @Modifying
    void save(@Param("BANK_CODE") String bankCode, @Param("BANK_NAME") String bankName);


    @Query(value = "SELECT count(1) from Bank", nativeQuery = true)
    int count(Bank bank);

    @Modifying
    @Transactional
    @Query("delete from Bank u where u.bankCode=:bankCode")
    int remove(@Param("bankCode") String bankCode);

    @Modifying
    @Transactional
    @Query("update Bank u set u.bankName = :bankName where u.bankCode=:bankCode")
    int update(@Param("bankCode") String bankCode, @Param("bankName") String bankName);


//    Integer saveOrUpdate(Bank bank);

}
